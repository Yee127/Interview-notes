# Linux

## **目录结构**

### /bin：

- bin 是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令。

### /boot：

- 这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。

### /dev ：

- dev 是 Device(设备) 的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。

### /etc：

- etc 是 Etcetera(等等) 的缩写,这个目录用来存放所有的系统管理所需要的配置文件和子目录。

### /home：

- 用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的，如上图中的 alice、bob 和 eve。

### /lib：

- lib 是 Library(库) 的缩写这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。

### /lost+found：

- 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。

### /media：

- linux 系统会自动识别一些设备，例如U盘、光驱等等，当识别后，Linux 会把识别的设备挂载到这个目录下。

### /mnt：

- 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。

### /opt：

- opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。

### /proc：

- proc 是 Processes(进程) 的缩写，/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。

### /root：

- 该目录为系统管理员，也称作超级权限者的用户主目录。

### /sbin：

- s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序。

### /selinux：

-  这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的

### /srv：

-  该目录存放一些服务启动之后需要提取的数据。

### /sys：

- 这是 Linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。

### /tmp：

- tmp 是 temporary(临时) 的缩写这个目录是用来存放一些临时文件的。

### /usr：

- usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。

### /usr/bin：

- 系统用户使用的应用程序。

### /usr/sbin：

- 超级用户使用的比较高级的管理程序和系统守护程序。

### /usr/src：

- 内核源代码默认的放置目录。

### /var：

- var 是 variable(变量) 的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。

### /run：

- 是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。

## **vim常用快捷键**

### 删除当前行：dd

- 多行：数字+dd

### 拷贝当前行：yy

- 多行：数字+yy

### 粘贴：p

### 撤销：u

### 查找关键词：/关键词

### 设置行号：:set nu  

- 取消行号：:set nonu  

### 定位：

- 首行：gg
- 尾行：G
- 具体行：行号+shift + g

## **常用命令**

### **关机/重启**

- 立刻关机

	- shutdown -h now
	- halt

- 指定分钟后关机：shutdown -h 分钟
- 重启

	- shutdown -r now
	- reboot

- 内存同步至磁盘：sync

### **用户管理**

- 用户添加

	- useradd

- 修改用户密码：

	- passwd 用户名

- 删除用户

	- **保留home目录删除（建议）**

		- userdel 用户名

	- 不保留home目录删除

		- userdel -r 用户名

- 切换用户：su - 用户名 /  su  用户名
- 查看当前用户：

	- whoami/who am i

### **用户组**

- 新增组：

	- groupadd 组名
	- 新增用户入组：useradd -g 组名 用户名
	- 切换用户入组：usermod -g 组名 用户名

- 相关文件

	- /etc/passwd 文件

		- 用户( user )的配置文件,记录用户的各种信息
		- 
	每行的含义:用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell

	- /etc/shadow 文件

		- 口令的配置文件
		- 每行的含义:登录名:加密口令:最后次修改时间:最小时间间隔:最大时间间隔:警 告时间:不活动时间:失效时间:标志

	- /etc/group 文件

		- 组(group)的配置文件，记录Linux包含的组的信息
		- 每行含义:组名:令:组标识号:组内用户列表

### **运行级别**

- init 级别

	- 0

		- 关机

	- 1

		- 单用户[(找回丢失密码]

	- 2

		- 多用户状态没有网络服务

	- 3

		- 多用户状态有网络服务

	- 4

		- 系统末使用保留给用户

	- 5

		- 图形界面

	- 6

		- 系统重启

- 指定运行级别

	- 在centos7之前 , 在/etc/inittab文件中
	- 7之后

		- **multi-user.target: analogous to runlevel 3**
		- **graphical.targe : analogous to runlevel 5**
		- # To view current default target, run: systemctl get-default
		- # To set a default target, run: systemctl set-default TARGET.target

	- 面试题：如何找回root密码？

		- 

### **帮助指令**

- man
- help

### **文件目录**

- 显示文件绝对路径

	- pwd

- ls

	- -a

		- 显示当前文件的所有文件和目录，包含隐藏文件

	- -l

		- 以列的方式显示信息

- cd
- 创建目录

	- mkdir

		- 单级目录
		- -p

			- 多级目录

- 删除目录

	- 删除空目录

		- rmdir

	- 删除非空目录

		- rm -rf 文件目录

- 创建文件

	- touch

- 复制

	- cp

		- 复制文件
		- -r

			- 复制文件夹

	- 强制覆盖不提示

		- /cp

- 移除

	- rm指令

		- -r

			- 递归删除整个文件夹

		- -f

			- 强制删除不提示

- 移动

	- mv指令

		- mv 文件  文件

			- 同一目录移动：重命名
			- 不同目录：移动文件

- 查看文件

	- cat

		- 查看文件
		- -n

			- 显示行号

		- cat 文件 | more

- more指令

	- 空格

		- 向下翻一页

	- Enter

		- 向下翻一行

	- q

		- 离开

	- =

		- 行号

	- :f

		- 输出文件名和当前行号

	- ctrl+f

		- 向下滚动一屏

	- ctrl+b

		- 返回上一屏

- less指令

	- 用法：less 文件
	- 常用指令

		- 空格

			- 向下翻页

		- pg dn

			- 向下翻页

		- pg up

			- 向上翻页

		- /字串

			- 向下查找关键词

		- ？字串

			- 向上查找关键词

		- q

			- 离开

- echo

	- 输出文件内容

- head

	- 显示文件开头部分内容（默认10行）
	- 用法：

		- head 文件

			- 显示前10行内容

		- head -n 行数

			- 显示前指定行内容

- tail

	- 显示文件尾部部分内容（默认10行）
	- 用法：

		- tail 文件

			- 显示末10行内容

		- tail -n 行数

			- 显示末指定行内容

		- tail -f 文件

			- 实时追踪文件更新

- > 指令 和 >> 指令

	- >

		- 重定向

			- 用法：

				- ls -l > a.txt

					- 将列表内容写到文件a.txt中(覆盖)

				- cat 文件1 > 文件2

					- 将文件1的内容覆盖到文件2

	- >>

		- 追加

			- 用法：

				- ls -l >> a.txt

					- 将列表内容追加到文件a.txt末尾

				- echo "内容" >> 文件

					- 将输出的内容追加到文件末尾

- ln指令

	- 软链接

		- 用法：ln -s [原文件或者目录]  [软链接名]
		- 删除软链接

			- rm 软链接名

- history

	- 查看历史指令
	- history 数字

		- 指定显示最近的几条指令

	- 执行指定的历史指令

		- !+数字

### **时间日期类**

- date指令

	- 1）显示当前时间
	- 2）date +%Y

		- (功能描述:显示当前年份)

	- 3) date + %m

		- (功能描述:显示当前月份)

	- 4) date + %d

		- (功能描述:显示当前是哪一天)

	- 5) date "+ %Y-%m-%d %H:%M:%S" 

		- (功能描述:显示年月日时分秒)

	- 设置日期

		- date -s 字符串时间

			- date -s "2020-12-12 12:12:12"

- cal指令

	- 查看日历指令
	- cal 年份

		- 查看全年日历

### **搜索查找类**

- find指令

	- -name

		- 按照指定名查

			- find /home -name hello.txt

	- -user

		- 查找属于指定用户的所有文件

	- -size

		- 按照指定的文件大小查找文件

			- +(大于)   -(小于) 

- locate指令

	- 定位

- grep指令 和 管道符 | 

	- grep  过滤查找
	- |

		- 表示将前一个命令的处理结果输出传递给后面的命令处理。

	- 使用：

		- 例如：查找a.txt文件中的share

			- cat a.txt | grep "share"

	- -n

		- 显示匹配行以及行号

			- grep -n "share" a.txt

	- -i

		- 忽略大小写

### **压缩和解压类**

- gzip/gunzip

	- 压缩

		- gzip

	- 解压

		- gunzip

- zip/unzip

	- zip -r

		- 递归压缩（压缩目录）
		- 用法：

			- zip -r [命名.zip] [指定的文件/目录]

	- unzip -d

		- 指定解压后的文件的存放目录
		- 
		用法：

			- unzip -d [指定的路径] [要解压的文件]

- tar

	- 压缩

		- 打包指令，打包后的格式：.tar.gz
		- 用法：

			- tar  -zcvf  [命名.tar.gz]  [要打包的文件1] [要打包的文件2] ...[要打包的文件n]

	- 解压

		- 用法：

			- tar -zxvf [要解压的文件]

		- 解压到指定路径

			- tar -zxvf [要解压的文件] -C [要解压的位置]

## 组

### 文件、目录

- 查看文件、目录所在组

	- ls -lha

- 修改文件的拥有者

	- chown 用户名 文件名
	- root下进行

- 修改目录的拥有者

	- chown -R 新的拥有者 文件目录名

- 修改文件所在组

	- 文件

		- chgrp 新组名 文件名
		- chown 要改的拥有者:要改的组 文件

	- 文件夹

		- chgrp -R 新组名 文件夹
		- chown -R 要改的拥有者:要改的组 文件/文件夹
		- -R  对文件夹里的子文件递归生效 

### 文件权限

drwxr-xr-x. 3 yee yee     32 10月 6 07:07 桌面

0-9位说明
1. 第0位确定文件类型(d,-,I, C, b)
	L 是链接，相当于windows的快捷方式
	D 是目录，相当于windows的文件夹
	C 是字符设备文件，鼠标，键盘
	B 是块设备，比如硬盘
2. 第1-3位确定所有者(该文件的所有者)拥有该文件的权限。---User
3. 第4-6位确定所属组(同用户组的)拥有该文件的权限，---Group
4. 第7-9位确定其他用户拥有该文件的权限---Other


- rwx作用到文件

	- r

		- 可以读取

	- w

		- 可以修改，但是不代表可删除
		- 可删除前提条件：该文件所在的目录有写权限

	- x

		- 可以被执行

- rwx作用到目录

	- r

		- 可以读取，ls可查看

	- w

		- 可以修改，对目录内创建+删除+重命名目录

	- x

		- 可进入该目录

### 修改权限

- 命令：chmod
- 第一种用法：

  第一种方式: +、-、=变更权限
  u:所有者g:所有组o:其他人a:所有人(u、g、o的总和)
  1) chmod u=rwx,g=rx,o=x 文件/目录名
  2) chmod O+W 文件/目录名
  3) chmod a-x 文件/目录名
  
  案例演示
  1)给abc文件的所有者读写执行的权限,给所在组读执行权限,给其它组读执行权限。
  chmod u=rwx,g=rx,o=rx abc
  2)给abc文件的所有者除去执行的权限,增加组写的权限
  chmod u-x,g+w abc
  3)给abc文件的所有用户添加读的权限
  chmod a+r abc
  
- 第二种用法：通过数字变更权限

  第二种方式:通过数字变更权限
  r=4 w=2 x=1
  rwx=4+2+1=7
  chmod u=rwx,g=rx,o=x文件目录名
  相当于chmod 751 文件目录名
  案例演示
  要求:将/home/abc.txt文件的权限修改成rwxr- xIr-X,使用给数字的方式实现:
  chmod 755 /home/abc.txt

## 任务调度

## 磁盘分区

## 网络配置

